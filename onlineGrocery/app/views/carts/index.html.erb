<p id="notice"><%= notice %></p>

<h1>Listing Carts</h1>

<table>
  <thead>
    <tr>
      <th>Product</th>
      <th>Price</th>
      <th>Quantity</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @carts.each do |cart| %>
      <tr>
        <div class="list">
            <% if current_user.id == cart.user_id %>
                <td><%= cart.product.name %></td>
                <td><center><%= "$ #{cart.product.price}" %><center></td>
                <td><center><%= cart.quantity %></center></td>
                <div class="btn-group" role="group" aria-label="...">
                    <td><%= link_to 'Edit', edit_cart_path(cart), :class => "btn btn-primary" %></td>
                </div>
                <div class="btn-group" role="group" aria-label="...">
                    <td><%= link_to 'Delete', cart, method: :delete, data: { confirm: 'Are you sure?' }, :class => "btn btn-primary" %></td>
                </div>
            <% end %>
        </div>
      </tr>
    <% end %>
  </tbody>
</table>
<div class="checkout">
    <% @total_sum = 0 %>
    <% @carts.each do |cart| %>
        <% @total_sum += (cart.product.price * cart.quantity)%>
    <% end %>
    <%= "Total Price: $#{@total_sum}" %>
</div>
<br>

<%= link_to "Back", root_url %>
<!--%= link_to 'New Cart', new_cart_path %-->
